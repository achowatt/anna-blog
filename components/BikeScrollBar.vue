<template>
  <svg
    id="bike-scroll-bar"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    viewBox="0 0 120.79 520.52"
  >
    <defs>
      <linearGradient
        id="linear-gradient"
        x1="545.34"
        y1="471.54"
        x2="555.2"
        y2="471.54"
        gradientUnits="userSpaceOnUse"
      >
        <stop offset="0" stop-color="#e9a900" />
        <stop offset="0.14" stop-color="#ecb009" />
        <stop offset="0.36" stop-color="#f5c423" />
        <stop offset="0.57" stop-color="#ffda3f" />
        <stop offset="0.87" stop-color="#ffd055" />
        <stop offset="0.99" stop-color="#e9b000" />
      </linearGradient>
    </defs>
    <g id="bicycle">
      <path
        id="right-pedal"
        d="M546.66,465.69l-2.72-.06a.94.94,0,0,1,0-1.87l2.71.07a.93.93,0,1,1,0,1.86Z"
        transform="translate(-505.81 -397.27)"
        fill="#2f2e41"
      />
      <path
        id="left-pedal"
        d="M555.17,457.92l-2.71-.07a.94.94,0,0,1-.92-1,1,1,0,0,1,1-.91l2.72.07a.94.94,0,1,1-.05,1.87Z"
        transform="translate(-505.81 -397.27)"
        fill="#2f2e41"
      />
      <g id="bike-body">
        <path
          id="seat"
          d="M534.21,440.47a5,5,0,0,1-1-.13c-1.5-.39-2-1.06-2.12-1.4a.32.32,0,0,1,.06-.31.28.28,0,0,1,.28,0c.47.17,7.14-1,9.51-1.47a2.56,2.56,0,0,1,2,.16.67.67,0,0,1,.25.49v.06l-4.67,1.6A11.22,11.22,0,0,1,534.21,440.47Z"
          transform="translate(-505.81 -397.27)"
          fill="#2f2e41"
        />
        <path
          d="M570,461.81a.18.18,0,0,1-.16-.1L561.6,441.6a.5.5,0,0,0-.47-.31l-23.94-.1a.51.51,0,0,0-.43.24l-11.94,18.5a.17.17,0,0,1-.24,0,.17.17,0,0,1-.05-.2l11.94-18.5a.87.87,0,0,1,.72-.39l23.94.09a.85.85,0,0,1,.78.52l8.26,20.11a.16.16,0,0,1-.09.22H570Z"
          transform="translate(-505.81 -397.27)"
          fill="#2f2e41"
        />
        <path
          d="M542.29,461.85a.17.17,0,0,1-.17-.13l-5.06-19.39a.17.17,0,1,1,.33-.09l5.06,19.4a.16.16,0,0,1-.12.2h0Z"
          transform="translate(-505.81 -397.27)"
          fill="#2f2e41"
        />
        <path
          d="M560.5,433.75a.59.59,0,0,1-.17-1.16l5.17-1.69a.59.59,0,0,1,.74.4.58.58,0,0,1-.37.73l-5.17,1.69A.64.64,0,0,1,560.5,433.75Z"
          transform="translate(-505.81 -397.27)"
          fill="#2f2e41"
        />
        <path
          d="M546.4,461.81a.17.17,0,0,1-.17-.17.18.18,0,0,1,0-.12L562,446a.16.16,0,0,1,.24,0h0a.16.16,0,0,1,0,.24h0l-15.74,15.53A.12.12,0,0,1,546.4,461.81Z"
          transform="translate(-505.81 -397.27)"
          fill="#2f2e41"
        />
        <path
          d="M526.19,463.37a.17.17,0,0,1-.16-.18.17.17,0,0,1,.17-.16l14.19.3h0a.18.18,0,0,1,.16.18.16.16,0,0,1-.17.16Z"
          transform="translate(-505.81 -397.27)"
          fill="#2f2e41"
        />
        <path
          d="M561.38,439.85a.18.18,0,0,1-.17-.14l-.7-3.73a.17.17,0,0,1,.13-.2h0l2.69.07,0-1.82a.17.17,0,0,1,.34,0l0,2a.17.17,0,0,1-.18.17l-2.65-.06.67,3.52a.17.17,0,0,1-.14.2h0Z"
          transform="translate(-505.81 -397.27)"
          fill="#2f2e41"
        />
        <path
          d="M543.33,468.16a3.4,3.4,0,1,1,3.48-3.31A3.4,3.4,0,0,1,543.33,468.16Zm.15-6.45a3.06,3.06,0,1,0,3,3.13h0A3.06,3.06,0,0,0,543.48,461.71Z"
          transform="translate(-505.81 -397.27)"
          fill="#2f2e41"
        />
      </g>
      <g id="right-wheel">
        <line
          x1="65.92"
          y1="66.15"
          x2="56.83"
          y2="53.95"
          fill="none"
          stroke="#9f0000"
          stroke-miterlimit="10"
        />
        <line
          x1="65.57"
          y1="66.11"
          x2="50.84"
          y2="64.38"
          fill="none"
          stroke="#9f0000"
          stroke-miterlimit="10"
        />
        <line
          x1="65.62"
          y1="66.23"
          x2="66.66"
          y2="81.27"
          fill="none"
          stroke="#9f0000"
          stroke-miterlimit="10"
        />
        <line
          x1="65.38"
          y1="66.44"
          x2="55.25"
          y2="77.47"
          fill="none"
          stroke="#9f0000"
          stroke-miterlimit="10"
        />
        <line
          x1="65.62"
          y1="66.23"
          x2="75.18"
          y2="78.18"
          fill="none"
          stroke="#9f0000"
          stroke-miterlimit="10"
        />
        <line
          x1="65.91"
          y1="66.49"
          x2="80.34"
          y2="70.37"
          fill="none"
          stroke="#9f0000"
          stroke-miterlimit="10"
        />
        <line
          x1="65.62"
          y1="66.23"
          x2="78.91"
          y2="58.53"
          fill="none"
          stroke="#9f0000"
          stroke-miterlimit="10"
        />
        <line
          x1="65.99"
          y1="50.78"
          x2="65.61"
          y2="66.31"
          fill="none"
          stroke="#9f0000"
          stroke-miterlimit="10"
        />
        <path
          d="M574.49,478.46v0Z"
          transform="translate(-505.81 -397.27)"
          fill="#f2f2f2"
        />
        <path
          d="M575.94,479c.12-.17.24-.35.35-.53l.3-.44.07-.11-.95.25a.57.57,0,0,1-.08.13l-.24.36,0,.06C575.21,479,575.72,479.31,575.94,479Z"
          transform="translate(-505.81 -397.27)"
          fill="#fff"
        />
        <path
          d="M577.05,478.67l0,0h0Z"
          transform="translate(-505.81 -397.27)"
          fill="#f2f2f2"
        />
        <circle cx="65.54" cy="66.17" r="1.02" fill="#2f2e41" />
        <path
          d="M571.27,478.82a15.46,15.46,0,1,1,15.83-15.08,15.46,15.46,0,0,1-15.83,15.08Zm.74-30.57a15.12,15.12,0,1,0,14.75,15.48h0A15.14,15.14,0,0,0,572,448.25Z"
          transform="translate(-505.81 -397.27)"
          fill="#9f0000"
          stroke="#9f0000"
          stroke-miterlimit="10"
          stroke-width="5"
        />
      </g>
      <g id="left-wheel">
        <line
          x1="17.96"
          y1="64.85"
          x2="9.66"
          y2="52.29"
          fill="none"
          stroke="#9f0000"
          stroke-miterlimit="10"
        />
        <line
          x1="17.62"
          y1="64.81"
          x2="2.88"
          y2="63.08"
          fill="none"
          stroke="#9f0000"
          stroke-miterlimit="10"
        />
        <line
          x1="17.42"
          y1="65.14"
          x2="7.3"
          y2="76.17"
          fill="none"
          stroke="#9f0000"
          stroke-miterlimit="10"
        />
        <line
          x1="17.66"
          y1="64.92"
          x2="18.7"
          y2="79.97"
          fill="none"
          stroke="#9f0000"
          stroke-miterlimit="10"
        />
        <line
          x1="17.66"
          y1="64.92"
          x2="27.22"
          y2="76.87"
          fill="none"
          stroke="#9f0000"
          stroke-miterlimit="10"
        />
        <line
          x1="17.95"
          y1="65.18"
          x2="32.82"
          y2="69.21"
          fill="none"
          stroke="#9f0000"
          stroke-miterlimit="10"
        />
        <line
          x1="17.66"
          y1="64.92"
          x2="30.95"
          y2="57.22"
          fill="none"
          stroke="#9f0000"
          stroke-miterlimit="10"
        />
        <path
          d="M520.54,477.15l0,.06h0v-.07Z"
          transform="translate(-505.81 -397.27)"
          fill="#f2f2f2"
        />
        <path
          d="M519.06,477.6l-.33-.55-.27-.46a.41.41,0,0,1-.07-.11q.47.16.93.3l.08.13.22.37s0,0,0,.06A.33.33,0,0,1,519.06,477.6Z"
          transform="translate(-505.81 -397.27)"
          fill="#fff"
        />
        <circle cx="17.66" cy="65" r="1.02" fill="#2f2e41" />
        <path
          d="M523.39,477.65a15.45,15.45,0,1,1,15.83-15.07,15.47,15.47,0,0,1-15.83,15.07Zm.74-30.56a15.11,15.11,0,1,0,14.75,15.48h0A15.14,15.14,0,0,0,524.13,447.09Z"
          transform="translate(-505.81 -397.27)"
          fill="#9f0000"
          stroke="#9f0000"
          stroke-miterlimit="10"
          stroke-width="5"
        />
        <line
          x1="18.03"
          y1="49.47"
          x2="17.66"
          y2="65"
          fill="none"
          stroke="#9f0000"
          stroke-miterlimit="10"
        />
      </g>
      <g id="balloon">
        <path
          d="M556.19,406.61a10.08,10.08,0,0,1,2.06-6.88,6.44,6.44,0,0,1,6.56-2.24,7.48,7.48,0,0,1,4.52,4.86,12.12,12.12,0,0,1-.26,8.71c-1,2.28-4.87,7.82-7.83,5.86C558.11,414.84,556.33,410.21,556.19,406.61Z"
          transform="translate(-505.81 -397.27)"
          fill="#ed1c24"
        />
        <path
          d="M563.05,432.15c1.36-.93,1.66-2.84,1.32-4.45s-1.17-3.07-1.65-4.64a11,11,0,0,1-.22-5.73"
          transform="translate(-505.81 -397.27)"
          fill="none"
          stroke="#000"
          stroke-miterlimit="10"
          stroke-width="0.25"
        />
      </g>
      <g id="girl">
        <ellipse cx="35.61" cy="10.51" rx="4.65" ry="4.74" fill="#ff6584" />
        <path
          id="left-arm"
          d="M542.13,416.47a1,1,0,0,0-.5,1c.14.7.68,1.94,2.66,3.26l7.66,5.13,7.24,5.77s4.16,1.66,5.4.08-4.21-1.31-4.21-1.31-5.34-5.06-7.1-6.24S544.88,415,542.13,416.47Z"
          transform="translate(-505.81 -397.27)"
          fill="#ffb8b8"
        />
        <path
          d="M542.09,412.76,541,415.68l1.51.48.21,4.24L539,418.34l-1.89-2.12-.23-1.63s1.45-.26,2-3.54Z"
          transform="translate(-505.81 -397.27)"
          fill="#ffb8b8"
        />
        <path
          d="M549.19,437.18s6.62,6.77,4.92,10.34-10,16.07-10,16.07l-2.23-2.89a10.25,10.25,0,0,0,3.21-5.42,20.6,20.6,0,0,1,4-7.36c.68-.94-6.4-7.47-5.78-9.14S549.19,437.18,549.19,437.18Z"
          transform="translate(-505.81 -397.27)"
          fill="#ffb8b8"
        />
        <path
          d="M549.19,437.18s6.62,6.77,4.92,10.34-10,16.07-10,16.07l-2.23-2.89a10.25,10.25,0,0,0,3.21-5.42,20.6,20.6,0,0,1,4-7.36c.68-.94-6.4-7.47-5.78-9.14S549.19,437.18,549.19,437.18Z"
          transform="translate(-505.81 -397.27)"
          opacity="0.1"
          style="isolation: isolate"
        />
        <path
          d="M545,461.53s.69,1.39.49,1.94-1.31,3.77-1.31,3.77,1.17,4.65.32,4.54-3.89-3.23-3.76-4.38l.39-3.3-.95.76L539,463l1.68-2.12s1.8-2,2.36-1.89S545,461.53,545,461.53Z"
          transform="translate(-505.81 -397.27)"
          fill="#fbb03b"
        />
        <path
          d="M543.72,438.83l.44,1.07,1.87,8.37s.74,1,.51,4.14,3.74,15.43,3.74,15.43l.13,2.49L548,470l-1.63-3.11a21.29,21.29,0,0,0-2.4-6.25c-1.79-3-1.78-10.25-1.78-10.25l-4.82-11.2,3.79-1.86Z"
          transform="translate(-505.81 -397.27)"
          fill="#ffb8b8"
        />
        <path
          d="M549.46,466.28s.73,0,.83.25l2.26,6.24s4.1,4,2.09,4-5.36-.51-5.93-1.74-1.22-2.91-1.22-2.91l-.21,1.72-1.58-1.07s-.89-5.78.15-6.09A22.59,22.59,0,0,1,549.46,466.28Z"
          transform="translate(-505.81 -397.27)"
          fill="url(#linear-gradient)"
        />
        <path
          d="M547.05,433.57s1.68,1.52,1.52,1.64.95.41.74,1,.94,1.72.38,1.65a5.05,5.05,0,0,0-5.16,1.4l-.42-.05,0,.73s-1.75-2.1-6.27,1.13c0,0-1.49-.62-1.29-1.18s-2.43-1.17-1-4.77,5.83-3.5,5.83-3.5Z"
          transform="translate(-505.81 -397.27)"
          fill="#2f2e41"
        />
        <path
          d="M538,415s-.73-1.1-1.17-1-2.84,0-3.22.86,1.44,9.39,1.15,10.66-1.85,10.82-.51,11.57,2.9-2.85,2.9-2.85,4.21-1.81,7.79-.64,2.47-.42,2.47-.42a7.68,7.68,0,0,1-2.17-5.79c.39-3.3.57-3.57-.09-5.25,0,0-.12-2.63,0-3.35s.61-1.52.22-1.86a31.55,31.55,0,0,0-4.41-1.27s2,.84,1.11,1.45S538,415,538,415Z"
          transform="translate(-505.81 -397.27)"
          fill="#3f3d56"
        />
        <ellipse cx="35.74" cy="12.8" rx="3.4" ry="3.46" fill="#ffb8b8" />
        <path
          d="M534.4,414.46a.87.87,0,0,1,1,.29c.4.54.94,1.7.67,4l-1,8.74-.33,8.83s.22,4.24-1.63,4.16,0-4.06,0-4.06-.31-7-.07-9S531.75,415.56,534.4,414.46Z"
          transform="translate(-505.81 -397.27)"
          fill="#ffb8b8"
        />
        <path
          d="M539,399.34a2.53,2.53,0,0,0,1.47,1c1,.28,0,1.85,0,1.85a1,1,0,0,0-.17-1.18C539.77,400.44,538.91,400,539,399.34Z"
          transform="translate(-505.81 -397.27)"
          fill="#ff6584"
        />
        <ellipse cx="34.84" cy="5.33" rx="1.3" ry="1.32" fill="#ff6584" />
        <path
          d="M539,403.71a9,9,0,0,1,3.73-.48l-.13-.92a7,7,0,0,1-3.72.47Z"
          transform="translate(-505.81 -397.27)"
          fill="#3f3d56"
        />
        <path
          d="M541,404a7.64,7.64,0,0,0,4.41,3.08c3.08.84,0,5.56,0,5.56a3,3,0,0,0-.49-3.53C543.38,407.33,540.8,406.09,541,404Z"
          transform="translate(-505.81 -397.27)"
          fill="#ff6584"
        />
        <path
          d="M540.93,403.9s-1.27,3.08-2.67,3.37-1.29,5.17.9,5.9c0,0-1.6-2.86-.23-4.77S541.15,405,540.93,403.9Z"
          transform="translate(-505.81 -397.27)"
          fill="#ff6584"
        />
      </g>
    </g>
    <!-- <text
      transform="translate(34.52 514.5)"
      font-size="20"
      font-family="SnellRoundhand, Snell Roundhand"
    >
      End
    </text> -->
  </svg>
</template>

<script>
import { gsap } from "gsap";
import { MotionPathPlugin } from "gsap/MotionPathPlugin";
import { ScrollTrigger } from "gsap/ScrollTrigger";

export default {
  mounted() {
    const timeline = gsap.timeline();
    gsap.registerPlugin(ScrollTrigger, MotionPathPlugin);

    //Set Initial CSS
    timeline.set("#bicycle", {
      xPercent: -50,
      yPercent: -50,
      transformOrigin: "50% 50%"
    }); //center element on path

    timeline
      .to("#bicycle", 5, {
        ease: "power1.inOut",
        motionPath: {
          path:
            "M38.96102,47.52802 C39.81202,69.95502 31.37301,479.36101 50.69401,478.32501 ",
          autoRotate: true
        }
      })
      .to(
        "#right-wheel",
        5,
        { rotation: 2000, transformOrigin: "50% 50%" },
        "-=5"
      )
      .to(
        "#left-wheel",
        5,
        { rotation: 2000, transformOrigin: "50% 50%" },
        "-=5"
      );

    ScrollTrigger.create({
      trigger: ".container",
      start: "top top",
      end: "bottom bottom",
      animation: timeline,
      scrub: 1,
      onScrubComplete: ({ progress }) => {
        if (progress === 1) {
          gsap.to("#balloon", 2, { y: -100 }); //make balloon fly
          gsap.to("#left-arm", 0.3, {
            rotation: -80,
            transformOrigin: "10% 0%"
          });
        }
      },
      onUpdate: ({ progress }) => {
        if (progress < 1) {
          gsap.to("#balloon", 1, { y: 0 }); //make balloon come back
          gsap.to("#left-arm", 1, { rotation: 0, transformOrigin: "10% 0%" });
        }
      }
    });
  }
};
</script>

<style scoped>
#bike-scroll-bar {
  height: 100vh;
  position: fixed;
  top: 0;
  left: 0;
}
</style>
